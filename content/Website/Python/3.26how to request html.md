---
title: "request HTML"
date: 2022-03-12T18:10:08+08:00

---

## 深度优先搜索策略
HTML中获取URL，得到新的HTML文件，再从新的HTML文件中获取新的URL进行搜索。
## 宽度优先搜索策略
搜索完一个HTML页面，再去继续搜索下一层。
## HTTP和HTTPS
HTTP超文本传输协议是Server和Client请求和应答的标准（TCP）

URL统一资源定位符号

HTTPS：设计SSL安全socket层协议对HTTP协议传输的数据进行加密，从而诞生了HTTPS

SSL中使用了对称/非对称加密和HASH算法，实现网站的握手过程，保证隐私数据可以加密传输。

握手过程的简单描述：

B发送加密规则给S；
S把证书（自己的身份信息/加密公钥）发给B；
证书受到用户的信任后，B生成公钥加密（非对称加密算法）的随机数密码发给S；
S使用约定好的HASH计算握手消息，使用生成的随机数对消息进行加密（对称加密算法），并将所有网站信息发送给B；

## 请求头
描述客户端到服务器发送请求使用的协议类型：规定了浏览器可以接受的文件类型、可以接受的编码类型、浏览器可以接受的语言；请求的主机地址和端口，请求来自的页面，浏览器信息，请求时间。

## Cookies
网站为了辨别身份，进行Session跟踪而存在用户本地终端上的数据。

## Ajax
使用java向服务器提出请求处理响应，核心对象是XMLHTTPRequest；
在B和S中使用异步数据传输，爬虫中需要判断数据加载方式，如果没有刷新，数据就自动生成，说明数据的加载是通过ajax渲染到网页上的。

## Fiddler抓包
HTTP抓包工具原理是在电脑中开启一个HTTP代理服务器，转发所有的请求和响应，爬虫需要知道每个请求的类型，状态码，请求方式，请求头，请求参数和响应内容。

## Urllib
python自带的标准库，可以接受Request对象来设置URL。

**GET 用于从指定资源请求数据。**

/test/demo_form.php?name1=value1&name2=value2
1. GET 请求可被缓存
1. GET 请求保留在浏览器历史记录中
1. GET 请求可被收藏为书签
1. GET 请求不应在处理敏感数据时使用
1. GET 请求有长度限制
1. GET 请求只应当用于取回数据（不修改）

**POST 用于将数据发送到服务器来创建/更新资源。**

通过 POST 发送到服务器的数据存储在 HTTP 请求的请求主体中：最常见的HTTP方法。

```
POST /test/demo_form.php HTTP/1.1
Host: w3school.com.cn
name1=value1&name2=value2
```

**PUT 方法**

PUT 用于将数据发送到服务器来创建/更新资源。

POST 和 PUT之间的区别在于 PUT 请求是幂等的（idempotent）。也就是说，多次调用相同的 PUT 请求将始终产生相同的结果。相反，重复调用POST请求具有多次创建相同资源的副作用。

一个发送请求的例子：

```python
from urllib.request import Request, urlopen
headers={'User-Agent':'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.83 Safari/537.36'}
## 规定一个反爬虫的header请求头
request = Request('https://movie.douban.com/', headers=headers)
## Request生成request对象
html = urlopen(request).read().decode('utf8')
## urlopen打开request对象读取并解码

f=open('html.txt','w',encoding='utf8')
# 写文件
f.write(html)
f.close()
```